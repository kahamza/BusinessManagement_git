# üõ†Ô∏è Development Setup Guide

This guide will help you set up the development environment for the Business Management App.

## üñ•Ô∏è System Requirements

### Hardware
- **OS**: Windows 10/11, macOS 10.15+, or Linux
- **RAM**: 8GB minimum (16GB recommended)
- **Disk Space**: 10GB free space
- **Screen Resolution**: 1280x800 minimum

### Software
- **Android Studio** (Arctic Fox or later)
- **Java Development Kit (JDK)** 11 or later
- **Android SDK** (installed via Android Studio)
- **Git** (for version control)
- **Kotlin** (1.5.0 or later)

## üöÄ Installation Steps

### 1. Install Android Studio
1. Download Android Studio from the [official website](https://developer.android.com/studio)
2. Run the installer and follow the setup wizard
3. During installation, make sure to install:
   - Android SDK
   - Android SDK Platform
   - Performance (Intel HAXM - for better emulator performance)
   - Android Virtual Device

### 2. Install Git
1. Download Git from [git-scm.com](https://git-scm.com/downloads)
2. Run the installer with default options
3. Verify installation by running in terminal:
   ```bash
   git --version
   ```

### 3. Clone the Repository
```bash
git clone https://github.com/yourusername/BusinessManagement.git
cd BusinessManagement
```

### 4. Configure Android Studio
1. Open Android Studio
2. Select "Open an Existing Project" and navigate to the cloned repository
3. Wait for the project to sync and download dependencies

### 5. Install Required SDKs
1. Open SDK Manager (Tools > SDK Manager)
2. In the "SDK Platforms" tab, ensure the following are installed:
   - Android 11.0 (API 30)
   - Android 12.0 (API 31)
   - Android 13.0 (API 33)
3. In the "SDK Tools" tab, ensure the following are installed:
   - Android SDK Build-Tools
   - Android Emulator
   - Android SDK Platform-Tools
   - Intel x86 Emulator Accelerator (HAXM installer) - for Intel CPUs
   - Android Support Repository
   - Google Play Services
   - Google Repository

### 6. Configure Gradle Properties
Create or edit `gradle.properties` in your home directory (usually `~/.gradle/gradle.properties` on macOS/Linux or `%USERPROFILE%\.gradle\gradle.properties` on Windows) and add:

```properties
# Project-wide Gradle settings
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
android.useAndroidX=true
android.enableJetifier=true
kotlin.code.style=official

# Enable parallel execution
org.gradle.parallel=true
org.gradle.caching=true
org.gradle.configureondemand=true

# Kotlin compiler options
kotlin.incremental=true
kotlin.incremental.js=true
```

### 7. Set Up Local Properties
Create or edit `local.properties` in the project root and add your Android SDK path:

```properties
## This file is automatically generated by Android Studio.
# Do not modify this file manually.
sdk.dir=/path/to/your/android/sdk
```

### 8. Install Required Plugins
In Android Studio, install the following plugins:
1. Go to `Preferences/Settings` > `Plugins`
2. Search and install:
   - Kotlin
   - Android NDK
   - Google Services
   - Firebase
   - Git Integration
   - Markdown

### 9. Set Up Emulator
1. Open AVD Manager (Tools > AVD Manager)
2. Click "Create Virtual Device"
3. Select a device definition (e.g., Pixel 4)
4. Select a system image (preferably API 30 or later)
5. Complete the setup with recommended settings

## üîß Project Configuration

### 1. Configure App ID
Edit `app/build.gradle.kts` to set your application ID:

```kotlin
android {
    namespace = "com.yourcompany.businessmanagement"
    // ...
}
```

### 2. Set Up Signing Config
Create a `keystore.properties` file in the project root (add to `.gitignore`):

```properties
storePassword=your_keystore_password
keyPassword=your_key_password
keyAlias=your_key_alias
storeFile=path/to/your/keystore.jks
```

### 3. Configure Build Types
In `app/build.gradle.kts`:

```kotlin
android {
    // ...
    
    signingConfigs {
        create("release") {
            val keystoreProperties = Properties().apply {
                load(File("keystore.properties").inputStream())
            }
            
            storeFile = file(keystoreProperties.getProperty("storeFile"))
            storePassword = keystoreProperties.getProperty("storePassword")
            keyAlias = keystoreProperties.getProperty("keyAlias")
            keyPassword = keystoreProperties.getProperty("keyPassword")
        }
    }
    
    buildTypes {
        release {
            isMinifyEnabled = true
            isShrinkResources = true
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
            signingConfig = signingConfigs.getByName("release")
        }
        
        debug {
            applicationIdSuffix = ".debug"
            isDebuggable = true
        }
    }
    
    // Enable view binding
    buildFeatures {
        viewBinding = true
        compose = true
    }
    
    // Configure Java compatibility
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }
    
    // Configure Kotlin compiler options
    kotlinOptions {
        jvmTarget = "11"
        freeCompilerArgs = freeCompilerArgs + listOf(
            "-opt-in=kotlin.RequiresOptIn"
        )
    }
    
    // Configure Compose options
    composeOptions {
        kotlinCompilerExtensionVersion = "1.4.0"
    }
}
```

## üöÄ Running the App

### 1. Run on Emulator
1. Ensure you have an Android Virtual Device (AVD) set up
2. Select your AVD from the device dropdown in Android Studio
3. Click the "Run" button (green play button) or press `Shift + F10`

### 2. Run on Physical Device
1. Enable Developer Options on your Android device:
   - Go to Settings > About phone
   - Tap "Build number" 7 times
   - Go back to Settings > System > Developer options
   - Enable "USB debugging"
2. Connect your device via USB
3. Select your device from the device dropdown in Android Studio
4. Click the "Run" button

## üîß Troubleshooting

### Common Issues

#### 1. Gradle Sync Failed
- **Symptom**: Gradle sync fails with connection errors
- **Solution**:
  - Check your internet connection
  - Invalidate caches: `File > Invalidate Caches / Restart`
  - Delete `.gradle` folder in your project directory and resync

#### 2. Emulator Not Starting
- **Symptom**: Emulator fails to start or crashes
- **Solution**:
  - Enable virtualization in BIOS/UEFI settings
  - Install Intel HAXM (for Intel CPUs) or enable Hyper-V (for Windows)
  - Allocate more RAM to the emulator in AVD settings

#### 3. Build Errors
- **Symptom**: Build fails with dependency conflicts
- **Solution**:
  - Run `./gradlew clean build --stacktrace` to see detailed error
  - Check for version conflicts in `build.gradle` files
  - Update Gradle and plugin versions if needed

#### 4. Missing SDK Components
- **Symptom**: Errors about missing SDK components
- **Solution**:
  - Open SDK Manager in Android Studio
  - Install the missing components listed in the error message
  - Ensure you have accepted all licenses by running:
    ```bash
    sdkmanager --licenses
    ```

## üîÑ Version Control Setup

### Git Ignore
Ensure your `.gitignore` file includes:

```
# Android Studio
*.iml
.gradle
/local.properties
/.idea
.DS_Store
/build
/captures
.externalNativeBuild
.cxx

# Keystore files
*.jks
*.keystore
*.key

# Google Services (if using Firebase)
google-services.json

# Local configuration files
local.properties
keystore.properties

# Build files
*.apk
*.aab
*.ap_
*.dex
*.class
bin/
gen/

# Fastlane specific
fastlane/report.xml
fastlane/Preview.html
fastlane/screenshots
fastlane/test_output

# Environment variables
.env

# Debug logs
*.log
```

### Git Hooks
Set up pre-commit hooks for code quality:

1. Create `.git/hooks/pre-commit` with the following content:
```bash
#!/bin/sh

# Run ktlint
./gradlew ktlintCheck

# Run tests
./gradlew test

# If any command fails, exit with error
if [ $? -ne 0 ]; then
  echo "‚ùå Pre-commit checks failed. Please fix the issues and try again."
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"
exit 0
```

2. Make the file executable:
```bash
chmod +x .git/hooks/pre-commit
```

## üõ† Development Workflow

### 1. Branching Strategy
We follow Git Flow with the following branches:
- `main` - Production code
- `develop` - Integration branch for features
- `feature/*` - Feature branches
- `bugfix/*` - Bug fix branches
- `release/*` - Release preparation branches

### 2. Commit Message Format
```
<type>(<scope>): <subject>

[optional body]

[optional footer]
```

**Types**:
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `style`: Code style changes
- `refactor`: Code refactoring
- `test`: Adding or updating tests
- `chore`: Build process or tooling changes

### 3. Code Review Process
1. Create a feature branch from `develop`
2. Make your changes with atomic commits
3. Push your branch and create a Pull Request (PR)
4. Request review from at least one team member
5. Address review comments
6. After approval, squash and merge into `develop`

## üß™ Testing

### Running Tests
- **Unit Tests**: `./gradlew test`
- **Instrumented Tests**: `./gradlew connectedAndroidTest`
- **UI Tests**: `./gradlew connectedCheck`
- **Code Coverage**: `./gradlew jacocoTestReport`

### Test Coverage
We aim for at least 70% test coverage for all new code. You can generate a coverage report with:

```bash
./gradlew jacocoTestReport
```

The report will be available at `app/build/reports/jacoco/jacocoTestReport/html/index.html`

## üöÄ Deployment

### Building a Release APK
1. Update `versionCode` and `versionName` in `app/build.gradle.kts`
2. Create a signed APK:
   - `Build > Generate Signed Bundle / APK`
   - Select "APK"
   - Choose your keystore and enter passwords
   - Select "release" build type
   - Click "Finish"

The APK will be generated at `app/release/app-release.apk`

### Building an App Bundle
1. Follow the same steps as above but select "Android App Bundle"
2. The AAB file will be generated at `app/release/app-release.aab`

## üîÑ Continuous Integration

### GitHub Actions
We use GitHub Actions for CI/CD. The workflow files are located in `.github/workflows/`:

- `ci.yml` - Runs on every push and PR
- `release.yml` - Handles production releases

### Environment Variables
Create a `.env` file in the project root for local development:

```
# API Configuration
API_BASE_URL=https://api.yourdomain.com
API_KEY=your_api_key

# Firebase
FIREBASE_APP_ID=your_firebase_app_id
FIREBASE_API_KEY=your_firebase_api_key

# Other configurations
ENABLE_LOGGING=true
```

## üì± App Configuration

### Build Variants
- **debug**: Debug build with logging and test features
- **release**: Optimized build for production
- **staging**: Staging environment with test data

### Feature Flags
Feature flags can be toggled in `AppConfig.kt`:

```kotlin
object AppConfig {
    // Feature flags
    const val ENABLE_NEW_UI = true
    const val ENABLE_ANALYTICS = true
    
    // API configuration
    object Api {
        const val TIMEOUT_SECONDS = 30L
        const val BASE_URL = BuildConfig.API_BASE_URL
    }
    
    // Database configuration
    object Database {
        const val NAME = "business_management_db"
        const val VERSION = 1
    }
}
```

## üìö Additional Resources

### Documentation
- [Kotlin Documentation](https://kotlinlang.org/docs/home.html)
- [Android Developer Guides](https://developer.android.com/guide)
- [Jetpack Compose](https://developer.android.com/jetpack/compose)
- [Room Database](https://developer.android.com/training/data-storage/room)

### Tools
- [Android Studio](https://developer.android.com/studio)
- [Postman](https://www.postman.com/) - API testing
- [Charles Proxy](https://www.charlesproxy.com/) - Network debugging
- [LeakCanary](https://square.github.io/leakcanary/) - Memory leak detection

## üôã‚Äç‚ôÇÔ∏è Getting Help

If you encounter any issues or have questions:

1. Check the [GitHub Issues](https://github.com/yourusername/BusinessManagement/issues)
2. Search the documentation
3. Ask for help in the team chat
4. Create a new issue if the problem persists

## üéâ Congratulations!

You've successfully set up the development environment for the Business Management App. Happy coding!
